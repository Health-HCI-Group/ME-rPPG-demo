<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ME-rPPG Demo</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="./main.js"></script>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <div id="title">ME-rPPG Demo</div>
            <div id="description">
                <p>This application is still under maintenance.</p>
                <p>Capture your face with your camera on device to measure your heart rate.</p>
                <p>Press the button to start the measurement.</p>
                <p>All data is captured and used locally. Feel free with your privacy.</p>
                <div>
                    Known issues:
                    <ul>
                        <li>iOS devices are not supported by now.</li>
                        <li>It is hard to reach 30 fps on mobile devices.</li>
                        <li>Low quality cameras as well as mobile cameras may lead to biased results.</li>
                    </ul>
                </div>
            </div>
            <div id="controlPanel">
                <div id="cameraSelect">
                    <label for="cameraSelectDropdown"></label>
                    <select id="cameraSelectDropdown"></select>
                </div>
                <button id="switchButton" class="controlButtons">Start</button>
            </div>
        </div>
        <div id="viewPanel">
            <div id="textDisplay">
                <div id="cameraDisplay">
                    <div id="previewTitle">
                        <div id="debugInfo">
                            <div class="status-bar">
                                <div>
                                    <span class="metric-label">Heart Rate:</span>
                                    <span class="value-box">
                                        <span id="heartRateValue">NaN</span>
                                    </span>
                                    <span class="unit">BPM</span>
                                </div>
                                <div>
                                    <span class="metric-label">Inference FPS:</span>
                                    <span class="value-box">
                                        <span id="inferenceFpsValue">0.0</span>
                                    </span>
                                </div>
                                <div>
                                    <span class="metric-label">Inference Delay:</span>
                                    <span class="value-box">
                                        <span id="inferenceDelayValue">NaN</span>
                                    </span>
                                    <span class="unit">ms</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="canvas-wrapper" style="position: relative;">
                        <video id="videoInput" muted style="position: absolute; top: 0; left: 0; pointer-events: none;"></video>
                        <canvas id="previewCanvas"
                                style="position: absolute; top: 0; left: 0; pointer-events: none; display: none"></canvas>
                        <canvas id="overlayCanvas"
                                style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
                      </div>
                </div>
            </div>
            <div id="cameraPreview">
                <div id="resultPlot">
                    <div id="plot">
                        <div id="plotContainer">
                            <div id="plotContent">
                                <canvas id="plotCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
