<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script type="module" src="./main.js"></script>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <div id="title">ME-rPPG Demo</div>
            <div id="description">
                <p>This application is still under maintenance.</p>
                <p>Capture your face with your camera on device to measure your heart rate.</p>
                <p>Press the button to start the measurement.</p>
                <p>All data is captured and used locally. Feel free with your privacy.</p>
                <div>
                    Known issues:
                    <ul>
                        <li>iOS device is not supported by now.</li>
                        <li>Only 30fps camera is supported by now.</li>
                        <li>MediaPipe Face Mesh may fail to be loaded. If so, do refresh the page.</li>
                        <li>Low quality cameras may lead to biased results</li>
                    </ul>
                </div>
            </div>
            <div id="controlPanel">
                <button id="switchButton" class="controlButtons">Start</button>
            </div>
        </div>
        <div id="viewPanel">
            <div id="textDisplay">
                <div id="cameraDisplay">
                    <div id="previewTitle">
                        <div id="debugInfo">
                            <div id="inferenceDelay">
                                Inference Delay:&nbsp;<span id="inferenceDelayValue" class="textValue">NaN</span>&nbsp;ms
                            </div>
                            <div id="heartRate">
                                Heart Rate:&nbsp;<span id="heartRateValue" class="textValue">NaN</span>&nbsp;BPM
                            </div>
                            <div id="cameraFps">
                                Camera FPS:&nbsp;<span id="cameraFpsValue" class="textValue">0.00</span>
                            </div>
                            <div id="inferenceFps">
                                Inference FPS:&nbsp;<span id="inferenceFpsValue" class="textValue">0.00</span>
                            </div>
                        </div>
                    </div>
                    <video id="videoInput" playsinline autoplay></video>
                    <canvas id="previewCanvas"></canvas>
                </div>
            </div>
            <div id="cameraPreview">
                <div id="resultPlot">
                    <div id="plot">
                        <div id="plotContainer">
                            <div id="plotContent">
                                <canvas id="plotCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
